<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Irys Ephemeral Upload (module)</title>
  <script src="https://unpkg.com/arweave@1.15.1/bundles/web.bundle.min.js"></script>
</head>
<body>
<button id="go">Upload “Hello Irys!”</button>

<script type="module">
  import Irys from "https://unpkg.com/@irys/sdk@latest/dist/web.bundle.min.js";

  document.getElementById("go").onclick = async () => {
    try {
      const arweave = Arweave.init({});
      const jwk = await arweave.wallets.generate();   // ephemeral wallet
      const irys = new Irys("https://node2.irys.xyz", "arweave", jwk);

      const item = irys.createData("Hello from Irys!", {
        tags: [{ name: "Content-Type", value: "text/plain" }]
      });
      await item.sign();
      await item.upload();

      console.log("TX ID:", item.id);
      console.log("View:", "https://arweave.net/" + item.id);
      alert("✅ Uploaded!");
    } catch (err) {
      console.error(err);
      alert("❌ " + err.message);
    }
  };
</script>
</body>
</html>
